<!DOCTYPE html>
<html>
<head>
    <title>梦沃大点兵-旋转块</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #000000;
        }

        #controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .scbutton {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            background-color: #1cba00;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .scbutton:hover {
            background-color: rgb(0, 121, 8);
        }

        .upbutton {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            background-color: #008CBA;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .upbutton:hover {
            background-color: #005f73;
        }

        #cube-container {
            width: 98%;
            height: 98%;
            display: none;
            align-items: center;
        }
    </style>
</head>
<body>
    <audio id="bgm" src="bgm.mp3" loop></audio>
    <audio id="bgm" src="bgm.mp3" loop></audio>
    
    <div id="controls">
        <h1 style="color: aliceblue;">梦沃大点兵之旋转( )块</h1>
        <label for="image-upload" class="upbutton">选择图片</label>
        <input type="file" id="image-upload" accept="image/*" style="display: none;">
    </div>
    
    <div id="cube-container"></div>
    <script src="three.min.js"></script>
    <script>
        var isImageUploaded = false;
        var container = document.getElementById('cube-container');
        var uploader = document.getElementById('image-upload');
        var startBtn = document.getElementById('start-animation');
        var controls = document.getElementById('controls');

        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
        camera.position.z = 2;

        var renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(container.offsetWidth, container.offsetHeight);
        container.appendChild(renderer.domElement);

        var textureLoader = new THREE.TextureLoader();
        var cubeGeometry = new THREE.BoxGeometry(1, 1, 1);
        var cubeMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
        var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
        scene.add(cube);

        function animate() {
            requestAnimationFrame(animate);
            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;
            renderer.render(scene, camera);
        }

        function onWindowResize() {
            camera.aspect = container.offsetWidth / container.offsetHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.offsetWidth, container.offsetHeight);
        }

        window.addEventListener('resize', onWindowResize, false);
        
        uploader.addEventListener('change', function (e) {
            var file = e.target.files[0];
            var url = URL.createObjectURL(file);

            var img = new Image();
            img.onload = function () {
                var aspectRatio = img.naturalWidth / img.naturalHeight;
                cube.scale.x = aspectRatio;
                cube.scale.y = 1;
                cube.scale.z = 1;

                textureLoader.load(url, function (texture) {
                    cube.material.map = texture;
                    cube.material.needsUpdate = true;
                });
            };
            img.src = url;

            controls.style.display = 'none';
            container.style.display = 'block';
            onWindowResize();
            bgm.play();
        });

        animate();

        var bgm = document.getElementById('bgm');

        

    </script>
</body>
</html>
